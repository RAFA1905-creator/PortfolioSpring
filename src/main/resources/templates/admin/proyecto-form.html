<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyectos</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body class="dark-mode">

<nav class="navbar navbar-dark bg-dark shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold accent-text" href="/admin">Panel Admin</a>
        <span class="navbar-text text-light">Proyectos</span>
    </div>
</nav>

<div class="container mt-5 pt-4">

    <h1 class="section-title">Proyectos</h1>

    <div class="row">

        <!-- LISTADO -->
        <div class="col-md-7">
            <div class="card card-dark p-3">

                <h4 class="accent-text mb-3">Listado</h4>

                <table class="table table-dark table-striped">
                    <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Fecha</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr th:each="p : ${proyectos}">
                        <td th:text="${p.nombre}"></td>
                        <td th:text="${p.fecha}"></td>
                        <td>
                            <a th:href="@{'/admin/proyectos/' + ${p.id} + '/edit'}"
                               class="btn btn-outline-accent btn-sm">Editar</a>

                            <form th:action="@{'/admin/proyectos/' + ${p.id} + '/delete'}"
                                  method="post" style="display:inline;">
                                <button class="btn btn-danger btn-sm">Borrar</button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>
        </div>

        <!-- FORMULARIO -->
        <div class="col-md-5">
            <div class="card card-dark p-4">

                <h4 class="accent-text mb-3"
                    th:text="${proyecto.id} != null ? 'Editar Proyecto' : 'Nuevo Proyecto'"></h4>

                <form th:action="${proyecto.id} != null ?
                                  @{'/admin/proyectos/' + ${proyecto.id}} :
                                  @{/admin/proyectos}"
                      th:object="${proyecto}" method="post">

                    <input type="hidden" th:field="*{id}">

                    <div class="mb-3">
                        <label class="form-label accent-text">Nombre</label>
                        <input type="text" class="form-control" th:field="*{nombre}" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label accent-text">Descripción</label>
                        <textarea class="form-control" rows="4" th:field="*{descripcion}" required></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label accent-text">GitHub URL</label>
                        <input type="text" class="form-control" th:field="*{githubUrl}">
                    </div>

                    <div class="mb-3">
                        <label class="form-label accent-text">Imagen (URL)</label>
                        <input type="text" class="form-control" th:field="*{imagenUrl}">
                    </div>

                    <div class="mb-3">
                        <label class="form-label accent-text">Fecha</label>
                        <input type="date" class="form-control" th:field="*{fecha}">
                    </div>

                    <button class="btn btn-accent mt-2"
                            th:text="${proyecto.id} != null ? 'Guardar cambios' : 'Añadir proyecto'"></button>

                </form>

            </div>
        </div>

    </div>

</div>

</body>
</html>
